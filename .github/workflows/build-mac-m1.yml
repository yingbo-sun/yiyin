name: GitHub Actions Demo
run-name: ${{ github.actor }} is testing out GitHub Actions 🚀
on: [push]
jobs:
    build:
        name: macos-13
        runs-on: macos-13
        permissions:
          contents: write
          packages: write

        steps:
          - name: Node
            uses: actions/setup-node@v4
            with:
              node-version: 18

          - name: 拉取自身仓库代码
            uses: actions/checkout@v4
            # with:
            #   ref: dev

          - name: 安装依赖
            run: |
              yarn

          - name: 构建 ${{ runner.arch }}
            run: |
              yarn make
              mkdir upload-dist
              yarn push:dev

          - name: Download artifacts
            uses: actions/upload-artifact@v4
            with:
              name: app
              path: upload-dist
